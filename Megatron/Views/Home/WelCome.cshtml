@model Megatron.ViewModels.HomeViewModel
@using Megatron.Utility
@{
    ViewBag.Title = "title";
    Layout = "_Authenticated_Layout";
}

<div class="page-header row no-gutters py-4">
    <div class="col-12 col-sm-4 text-center text-sm-left mb-0">
        <h3 class="page-title">Welcome to Megatron</h3>
    </div>
</div>
<div class="row">
    <div class="col-lg col-md-6 col-sm-6 mb-4">
        <div class="stats-small stats-small--1 card card-small">
            <div class="card-body p-0 d-flex">
                <div class="chartjs-size-monitor" style="position: absolute; inset: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
                    <div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                        <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
                    </div>
                    <div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                        <div style="position:absolute;width:200%;height:200%;left:0; top:0"></div>
                    </div>
                </div>
                <div class="d-flex flex-column m-auto">
                    <div class="stats-small__data text-center">
                        <span class="stats-small__label text-uppercase">Contributions</span>
                        <h6 class="stats-small__value count my-3">@Model.Articles.Count()</h6>
                    </div>
                </div>
                <canvas height="74" class="blog-overview-stats-small-1 chartjs-render-monitor" width="186" style="display: block; width: 186px; height: 74px;"></canvas>
            </div>
        </div>
    </div>
    <div class="col-lg col-md-6 col-sm-6 mb-4">
        <div class="stats-small stats-small--1 card card-small">
            <div class="card-body p-0 d-flex">
                <div class="chartjs-size-monitor" style="position: absolute; inset: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
                    <div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                        <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
                    </div>
                    <div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                        <div style="position:absolute;width:200%;height:200%;left:0; top:0"></div>
                    </div>
                </div>
                <div class="d-flex flex-column m-auto">
                    <div class="stats-small__data text-center">
                        <span class="stats-small__label text-uppercase">Faculties</span>
                        <h6 class="stats-small__value count my-3">@Model.Faculties.Count()</h6>
                    </div>
                </div>
                <canvas height="74" class="blog-overview-stats-small-2 chartjs-render-monitor" width="186" style="display: block; width: 186px; height: 74px;"></canvas>
            </div>
        </div>
    </div>
    <div class="col-lg col-md-4 col-sm-6 mb-4">
        <div class="stats-small stats-small--1 card card-small">
            <div class="card-body p-0 d-flex">
                <div class="chartjs-size-monitor" style="position: absolute; inset: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
                    <div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                        <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
                    </div>
                    <div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                        <div style="position:absolute;width:200%;height:200%;left:0; top:0"></div>
                    </div>
                </div>
                <div class="d-flex flex-column m-auto">
                    <div class="stats-small__data text-center">
                        <span class="stats-small__label text-uppercase">Semesters</span>
                        <h6 class="stats-small__value count my-3">@Model.Semesters.Count()</h6>
                    </div>
                </div>
                <canvas height="74" class="blog-overview-stats-small-3 chartjs-render-monitor" width="186" style="display: block; width: 186px; height: 74px;"></canvas>
            </div>
        </div>
    </div>
</div>


@if (Model.Semester != null)
{
    <div class="card">
        <div class="card-header">
            Active Semester:
        </div>
        <div class="card-body pt-0">
            <h5 class="card-title">@Html.DisplayFor(s => s.Semester.SemesterName)</h5>
            <div class="row w-100 ml-1">
                <div class="col p-0 text-left">
                    <p id="startDate">@Html.DisplayFor(s => s.Semester.SemesterStartDate)</p>
                </div>
                <div class="col p-0 text-center">
                    <p id="closureDate">@Html.DisplayFor(s => s.Semester.SemesterClosureDate)</p>
                </div>
                <div class="col p-0 text-right">
                    <p id="endDate">@Html.DisplayFor(s => s.Semester.SemesterEndDate)</p>
                </div>
            </div>
            <div class="row position-relative w-100 ml-1">
                <div class="d-flex justify-content-between w-100 position-absolute" style="top: -3px;">
                    <div class="bg-secondary rounded-circle text-center text-white font-weight-bold" style="height: 30px;width: 30px;">
                        <p class="mt-1">1</p>
                    </div>
                    <div id="circle-mid" class="bg-warning rounded-circle text-center text-white font-weight-bold" style="height: 30px;width: 30px;">
                        <p class="mt-1">2</p>
                    </div>
                    <div class="bg-danger rounded-circle text-center text-white font-weight-bold " style="height: 30px;width: 30px;">
                        <p class="mt-1">3</p>
                    </div>
                </div>
                <div class="progress w-100" style="height: 10px;">
                    @if (Model.Semester.SemesterClosureDate > DateTime.Now && Model.Semester.SemesterEndDate > DateTime.Now)
                    {
                        <div id="progress-1" class="progress-bar bg-info w-25" role="progressbar" style="height: 10px;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        <div id="progress-2" class="progress-bar bg-secondary text-left font-italic w-75" role="progressbar" style="height: 10px;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">current</div>
                    }
                    else
                    {
                        <div id="progress-1" class="progress-bar bg-info w-75" role="progressbar" style="height: 10px;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        <div id="progress-2" class="progress-bar bg-secondary text-left font-italic w-25" role="progressbar" style="height: 10px;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">current</div>
                    }
                </div>
            </div>
            <div class="d-flex justify-content-between w-100 mt-3" style="top: -3px;">
                <div class="text-center text-dark font-weight-bold">
                    <p class="mt-1">Start date</p>
                </div>
                <div id="clouseDate" class="text-center text-warning font-weight-bold">
                    <p class="mt-1">Closure date</p>
                </div>
                <div class="text-center text-danger font-weight-bold">
                    <p class="mt-1">End date</p>
                </div>
            </div>
            @if (User.IsInRole(SystemRoles.Student))
            {
                <a asp-controller="Student" asp-action="SubmitArticle" id="createNewArticle" class="btn btn-primary">Create new article</a>
            }
        </div>
    </div>
}
else
{
    <div class="card">
        <div class="card-header">
            No Active Semester!
        </div>
    </div>
}